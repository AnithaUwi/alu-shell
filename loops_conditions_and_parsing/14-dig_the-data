#!/bin/bash
# Check if the log file is provided as an argument
if [ "$#" -ne 1 ]; then
	    echo "Usage: $0 <log_file>"
	        exit 1
fi

log_file="$1"

# Use awk to process the log file
awk '
{
	    # Extract the IP and HTTP status code from the log line
	        ip = $1
		    http_code = $9
		        
		        # Create a unique key combining IP and HTTP status code
			    key = ip " " http_code
			        
			        # Increment the count for this key
				    count[key]++
			    }
			    END {
			        # Print the results in the required format
				    for (key in count) {
					            print count[key], key
						        }
						}' "$log_file" | sort -nr | head -n 10
